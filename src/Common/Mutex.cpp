/*==================================================================*\
  Mutex.cpp
  ------------------------------------------------------------------
  Purpose:
  

  ------------------------------------------------------------------
  ©2010-2015 Eldritch Entertainment, LLC.
\*==================================================================*/


//==================================================================//
// INCLUDES
//==================================================================//
#include <Common/Mutex.hpp>
//------------------------------------------------------------------//

namespace Eldritch2 {

	Lock::Lock( Mutex& lock ) : _mutex( lock ) {
		_mutex.Enter();
	}

// ---------------------------------------------------

	Lock::~Lock() {
		_mutex.Leave();
	}

// ---------------------------------------------------

	bool Lock::IsAttachedTo( const Mutex& mutex ) const {
		return &mutex == &_mutex;
	}

// ---------------------------------------------------

	ReadLock::ReadLock( Mutex& lock ) : _mutex( lock ) {
		_mutex.EnterAsReader();
	}

// ---------------------------------------------------

	ReadLock::~ReadLock() {
		_mutex.LeaveAsReader();
	}

// ---------------------------------------------------

	bool ReadLock::IsAttachedTo( const Mutex& mutex ) const {
		return &mutex == &_mutex;
	}

}	// namespace Eldritch2